{"version":3,"sources":["components/NavigationBar/NavigationBar.js","components/UI/Spinner/Spinner.js","containers/ArtistInfo/ArtistInfo.js","components/BarChart/Rect/Rect.js","components/BarChart/BarChart.js","components/MetricViewBar/MetricViewBar.js","containers/SocialMediaMetrics/SocialMediaMetrics.js","components/BubbleChart/BubbleChart.js","containers/TrackMetrics/TrackMetrics.js","App.js","index.js"],"names":["navigationBar","props","react_default","a","createElement","className","id","type","placeholder","onChange","handleArtistChange","href","spinner","artistInfo","image","info","genre","content","isLoaded","Spinner_Spinner","height","src","images","alt","name","genres","join","Fragment","style","textAlign","Rect","state","x","y","width","fill","this","animateRect","_this$state","yExtent","d3","refs","rect","attr","yScale","transition","duration","_this$state2","ref","nextProps","prevState","Component","margin","BarChart","bars","xScale","range","wScale","paddingInner","paddingOuter","accentScale","xAxis","_this","tickFormat","yAxis","nextState","drawAxis","call","selectAll","_this2","transform","concat","map","d","i","BarChart_Rect_Rect","key","bandwidth","textAnchor","yLabel","chartData","startDate","endDate","data","filter","sDate","moment","unix","eDate","date","value","domain","metricViewBar","buttons","metricNames","obj","onClick","clicked","bind","fullName","Range","createSliderWithTooltip","Slider","startDateUnix","Date","subtract","endDateUnix","socialMediaMetrics","chartTitle","metrics","getChartData","metricId","cArr","reduce","acc","metric","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","metricMetadata","items","Symbol","iterator","next","done","m","push","err","return","sort","b","split","length","MetricViewBar_MetricViewBar","handleMetricIdChange","marginBottom","components_BarChart_BarChart","format","defaultValue","min","max","step","allowCross","tipFormatter","onAfterChange","onRangeChange","simulation","force","strength","BubbleChart","circles","rScale","cScale","forceTick","node","radius","on","renderCircles","nodes","alpha","restart","_this3","_this4","svgContainer","exit","remove","nodeEnter","enter","append","label","merge","select","text","substring","top15","summary","TW","slice","metadata","asset_name","trackMetrics","circleData","getTrackData","components_BubbleChart_BubbleChart","handleBubbles","App","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","artist","artistId","trackMetricId","bubbleData","event","emitDebouncedSearch","target","handleArtistSearch","val","setState","dataArr","item","timeseries","deltas","totals","keys","e","debounce","grabMetricMetadata","grabArtistMetric","prevProps","axios","get","then","response","catch","error","console","log","artists","resetArtistInfo","grabTrackMetrics","grabArtistInfo","_this5","NavigationBar_NavigationBar","ArtistInfo_ArtistInfo","SocialMediaMetrics_SocialMediaMetrics","TrackMetrics_TrackMetrics","defaults","baseURL","params","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.51531d27.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./NavigationBar.css\";\n\nconst navigationBar = props => {\n  return (\n    <nav className=\"NavigationBar\">\n      <div className=\"NavigationBar__search-bar\">\n        <input\n          id=\"search\"\n          className=\"artistSearchInput\"\n          type=\"text\"\n          placeholder=\"Search For An Artist\"\n          onChange={props.handleArtistChange}\n        />\n      </div>\n      <div className=\"NavigationBar__links\">\n        <ul className=\"NavigationBar__ul\">\n          <li className=\"NavigationBar__li\">\n            <a href=\"#artistInfo\" className=\"NavigationBar__href\">\n              Artist Info\n            </a>\n          </li>\n          <li className=\"NavigationBar__li\">\n            <a href=\"#socialMedia\" className=\"NavigationBar__href\">\n              Social Media\n            </a>\n          </li>\n          <li className=\"NavigationBar__li\">\n            <a href=\"#trackSpins\" className=\"NavigationBar__href\">\n              Track Spins\n            </a>\n          </li>\n        </ul>\n      </div>\n    </nav>\n  );\n};\n\nexport default navigationBar;\n","import React from \"react\";\nimport \"./Spinner.css\";\n\nconst spinner = () => {\n  return <div className=\"Loader\">Loading...</div>;\n};\n\nexport default spinner;\n","import React from \"react\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport \"./ArtistInfo.css\";\n\nconst artistInfo = props => {\n  let image = null;\n  let info = null;\n  let genre = null;\n  let content = null;\n\n  //if search is pending. show loading spinner.\n  if (props.isLoaded) {\n    content = <Spinner />;\n  }\n\n  //when artist info is retrived. load content instead of spinner.\n  if (props.artistInfo) {\n    image = (\n      <img height=\"100\" src={props.artistInfo.images[0][100]} alt=\"Artist\" />\n    );\n    info = <h1>Artist Name: {props.artistInfo.name}</h1>;\n    genre = <h2>Genre: {props.artistInfo.genres.join(\" \")}</h2>;\n\n    content = (\n      <>\n        {image}\n        <div style={{ textAlign: \"center\" }}>\n          {info}\n          {genre}\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div id=\"artistInfo\" className=\"ArtistInfo\">\n      <div className=\"ArtistInfo__label\">\n        <span>Artist Info</span>\n      </div>\n      <div className=\"ArtistInfo__info\">{content}</div>\n    </div>\n  );\n};\n\nexport default artistInfo;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\n\nclass Rect extends Component {\n  state = { x: null, y: null, width: null, height: null, fill: null };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (!nextProps) return null;\n\n    return {\n      x: nextProps.x,\n      y: nextProps.y,\n      width: nextProps.width,\n      height: nextProps.height,\n      fill: nextProps.fill\n    };\n  }\n\n  componentDidMount() {\n    this.animateRect();\n  }\n\n  componentDidUpdate() {\n    this.animateRect();\n  }\n\n  animateRect() {\n    const { y, height } = this.state;\n\n    let rect;\n\n    //use yExtent if exists, if not use linear scale from range 0\n    if (this.props.yExtent) {\n      rect = d3\n        .select(this.refs.rect)\n        .attr(\"y\", this.props.yScale(this.props.yExtent[0]));\n    } else {\n      rect = d3.select(this.refs.rect).attr(\"y\", this.props.yScale(0));\n    }\n\n    //set up bar transition\n    rect\n      .attr(\"height\", 0)\n      .transition()\n      .duration(800)\n      .attr(\"y\", y)\n      .attr(\"height\", height);\n  }\n\n  render() {\n    const { x, y, height, width, fill } = this.state;\n\n    return (\n      <rect ref=\"rect\" x={x} y={y} height={height} width={width} fill={fill} />\n    );\n  }\n}\n\nexport default Rect;\n","import React, { Component } from \"react\";\nimport Rect from \"./Rect/Rect\";\nimport moment from \"moment\";\nimport * as d3 from \"d3\";\nimport \"./BarChart.css\";\n\n//setting up global values for svg height and width\nconst margin = { left: 100, top: 20, right: 20, bottom: 50 };\nconst height = 480 - margin.top - margin.bottom;\nconst width = 800 - margin.left - margin.right;\n\nclass BarChart extends Component {\n  state = {\n    bars: [],\n    xScale: d3.scaleTime().range([0, width]),\n    yScale: d3.scaleLinear().range([height, 0]),\n    //yScale: d3.scaleLog().range([height, 0]),\n    wScale: d3\n      .scaleBand()\n      .range([0, width])\n      .paddingInner(0.1)\n      .paddingOuter(0),\n    accentScale: d3.scaleSequential(d3.interpolateRdBu),\n    yExtent: null\n  };\n\n  //setting up axis and tick formats\n  xAxis = d3.axisBottom(this.state.xScale).tickFormat(d3.timeFormat(\"%b-%Y\"));\n  yAxis = d3.axisLeft(this.state.yScale);\n  //.ticks(4)\n  //.tickFormat(function(d) {\n  // return d;\n  //});\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    //console.log(\"getDerivedStateFromProps\", nextProps, !nextProps);\n    if (!nextProps) return null;\n\n    const { chartData, startDate, endDate } = nextProps;\n    //console.log(data);\n    const { xScale, yScale, wScale, accentScale } = prevState;\n\n    //clean data\n    const data = chartData\n      .filter(d => {\n        let sDate = moment.unix(startDate);\n        let eDate = moment.unix(endDate);\n        let date = moment(d.date);\n        return d.value && d.date && date >= sDate && date <= eDate;\n      })\n      .map(d => {\n        d.value = +d.value;\n        return d;\n      });\n\n    //recalculate scales with new data\n    xScale.domain(d3.extent(data, d => d.date));\n    yScale.domain([0, d3.max(data, d => d.value)]);\n    //Below is yscale for log\n    //const yExtent = d3.extent(data, d => d.value);\n    //yScale.domain(d3.extent(data, d => d.value));\n    wScale.domain(data.map(d => d.date));\n    accentScale.domain([d3.max(data, d => d.value), 0]);\n\n    //create rect x and y values.\n    const bars = data.map(d => {\n      return {\n        x: xScale(d.date),\n        y: yScale(d.value),\n        height: height - yScale(d.value),\n        fill: accentScale(d.value)\n      };\n    });\n\n    return { bars, yScale };\n  }\n\n  //Only update barChart if data has been changed.\n  shouldComponentUpdate(nextProps, nextState) {\n    //console.log(\"shouldComponentUpdate: this.state =\", this.state);\n    //console.log(\"shouldComponentUpdate: nextSate =\", nextState);\n    //console.log(this.state.bars !== nextState.bars);\n    return true;\n  }\n\n  //happens once. render x and y axis on loadup.\n  componentDidMount() {\n    this.drawAxis();\n  }\n\n  //update axis when component updates\n  componentDidUpdate() {\n    this.drawAxis();\n  }\n\n  drawAxis() {\n    d3.select(this.refs.xAxis)\n      .transition()\n      .duration(800)\n      .call(this.xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-65)\");\n    d3.select(this.refs.yAxis)\n      .transition()\n      .duration(800)\n      .call(this.yAxis);\n  }\n\n  render() {\n    return (\n      <svg\n        height={height + margin.top + margin.bottom}\n        width={width + margin.left + margin.right}\n      >\n        <g transform={`translate(${margin.left},${margin.top})`}>\n          {this.state.bars.map((d, i) => {\n            return (\n              <Rect\n                key={i}\n                x={d.x}\n                y={d.y}\n                height={d.height}\n                width={this.state.wScale.bandwidth()}\n                fill={d.fill}\n                yScale={this.state.yScale}\n                // yExtent={this.state.yExtent}\n              />\n            );\n          })}\n          <g ref=\"xAxis\" transform={`translate(0, ${height})`} />\n          <g ref=\"yAxis\" />\n\n          <text\n            className=\"BarChart-yLabel\"\n            x={-(height / 2)}\n            y={-80}\n            transform=\"rotate(-90)\"\n            textAnchor=\"middle\"\n          >\n            {this.props.yLabel}\n          </text>\n        </g>\n      </svg>\n    );\n  }\n}\n\nexport default BarChart;\n","import React from \"react\";\nimport \"./MetricViewBar.css\";\n\nconst metricViewBar = props => {\n  let buttons;\n\n  if (props.metricNames) {\n    buttons = props.metricNames.map(obj => {\n      return (\n        <button\n          key={obj.id}\n          className=\"MetricView__buttons\"\n          onClick={props.clicked.bind(this, obj.id)}\n        >\n          {obj.fullName}\n        </button>\n      );\n    });\n  }\n\n  return <div className=\"MetricViews\">{buttons}</div>;\n};\n\nexport default metricViewBar;\n","import React from \"react\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport BarChart from \"../../components/BarChart/BarChart\";\nimport MetricViewBar from \"../../components/MetricViewBar/MetricViewBar\";\nimport Slider from \"rc-slider\";\n//import Range from \"rc-slider/lib/Range\";\nimport moment from \"moment\";\nimport \"rc-slider/assets/index.css\";\nimport \"./SocialMediaMetrics.css\";\n\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\nconst Range = createSliderWithTooltip(Slider.Range);\n//get 5 years ago in unix time\nconst startDateUnix = moment(new Date())\n  .subtract(5, \"y\")\n  .unix();\n//get todays date in unix time\nconst endDateUnix = moment(new Date()).unix();\n\nconst socialMediaMetrics = props => {\n  // let barChart = null;\n  let data = null;\n  let metricNames = null;\n  let content = null;\n  let chartTitle = null;\n  let yLabel = null;\n\n  if (props.isLoaded) {\n    content = <Spinner />;\n  }\n  //only do work if metrics is not null;\n  if (props.metrics) {\n    //Grab data if metric Id was changed\n    data = props.getChartData(props.metricId);\n    //grab list of metric names.\n    metricNames = props.metrics.data\n      .reduce((acc, metric) => {\n        for (let m of props.metricMetadata.items) {\n          if (m.id === metric.metricId) {\n            acc.push({ fullName: m.fullName, id: m.id });\n            break;\n          }\n        }\n        return acc;\n      }, [])\n      .sort((a, b) => {\n        return a.id - b.id;\n      });\n\n    chartTitle = metricNames.filter(name => name.id === props.metricId)[0]\n      .fullName;\n\n    let cArr = chartTitle.split(\" \");\n    yLabel = cArr[cArr.length - 1];\n\n    content = (\n      <>\n        <MetricViewBar\n          clicked={props.handleMetricIdChange}\n          metricNames={metricNames}\n          chartTitle={chartTitle}\n        />\n        <h1 style={{ marginBottom: \".3em\" }}>{chartTitle}</h1>\n        <BarChart\n          chartData={data}\n          yLabel={yLabel}\n          startDate={props.startDate}\n          endDate={props.endDate}\n        />\n        <span className=\"SocialMediaMetrics__metrics-date-range\">\n          {moment.unix(props.startDate).format(\"MMM Do YYYY\")}\n          {\"   -   \"}\n          {moment.unix(props.endDate).format(\"MMM Do YYYY\")}\n        </span>\n        <Range\n          className=\"SocialMediaMetrics__metrics-range-slider\"\n          defaultValue={[props.startDate, props.endDate]}\n          min={startDateUnix}\n          max={endDateUnix}\n          step={86400 /*1 day in seconds*/}\n          allowCross={false}\n          tipFormatter={value => moment.unix(value).format(\"MMM Do YYYY\")}\n          onAfterChange={props.onRangeChange}\n        />\n      </>\n    );\n  }\n\n  //return barChart;\n  return (\n    <div id=\"socialMedia\" className=\"SocialMediaMetrics\">\n      <div className=\"SocialMediaMetrics__label\">\n        <span>Social Media</span>\n      </div>\n      <div className=\"SocialMediaMetrics__metrics\">{content}</div>\n    </div>\n  );\n};\n\nexport default socialMediaMetrics;\n","import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\n\n//setting up global values for svg height and width\nconst margin = { left: 20, top: 20, right: 20, bottom: 20 };\nconst height = 600 - margin.top - margin.bottom;\nconst width = 800 - margin.left - margin.right;\n\n//setup the simulation for the bubbles to explode from the center on data change\nconst simulation = d3\n  .forceSimulation()\n  .force(\"center\", d3.forceCenter(width / 2, height / 2))\n  .force(\"charge\", d3.forceManyBody().strength(180));\n\nclass BubbleChart extends Component {\n  state = {\n    circles: [],\n    rScale: d3.scaleLinear().range([30, 125]),\n    cScale: d3.scaleOrdinal(d3.schemePaired)\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    //console.log(\"getDerivedStateFromProps\", nextProps,prevState);\n    if (!nextProps) return null;\n    const { data } = nextProps;\n    const { rScale, cScale } = prevState;\n\n    //filter top 10\n    let sortedData = data.sort((a, b) => {\n      return b.summary.TW - a.summary.TW;\n    });\n\n    const top15 = sortedData.slice(0, 15);\n    //Update scales with new data\n    rScale.domain(d3.extent(top15, d => d.summary.TW));\n    cScale.domain(top15, d => d.metadata.asset_name);\n\n    //create data for circles\n    const circles = top15.map(data => {\n      return { name: data.metadata.asset_name, value: data.summary.TW };\n    });\n\n    return { circles };\n  }\n\n  componentDidMount() {\n    simulation\n      .force(\n        \"collision\",\n        d3.forceCollide().radius(d => this.state.rScale(d.value))\n      )\n      .on(\"tick\", this.forceTick);\n    this.renderCircles();\n    simulation\n      .nodes(this.state.circles)\n      .alpha(0.9)\n      .restart();\n  }\n\n  componentDidUpdate() {\n    //console.log(\"bubbleChart: componentDidUpdate\");\n    //console.log(this.state.circles);\n\n    simulation\n      .force(\n        \"collision\",\n        d3.forceCollide().radius(d => this.state.rScale(d.value))\n      )\n      .on(\"tick\", this.forceTick);\n\n    this.renderCircles();\n\n    simulation\n      .nodes(this.state.circles)\n      .alpha(0.9)\n      .restart();\n  }\n\n  renderCircles() {\n    //console.log(\"renderCircles\", this.state.circles);\n\n    //JOIN\n    this.node = d3\n      .select(this.refs.svgContainer)\n      .selectAll(\"g\")\n      .data(this.state.circles);\n\n    //EXIT\n    this.node.exit().remove();\n\n    //ENTER\n    this.nodeEnter = this.node.enter().append(\"g\");\n    this.circles = this.nodeEnter.append(\"circle\");\n    this.label = this.nodeEnter.append(\"text\");\n\n    //ENTER + UPDATE\n    this.node = this.nodeEnter.merge(this.node);\n    this.node\n      .select(\"circle\")\n      .attr(\"r\", d => this.state.rScale(d.value))\n      .attr(\"fill\", d => this.state.cScale(d.name));\n    this.node\n      .select(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"font-size\", d => this.state.rScale(d.value) / 4)\n      .attr(\"fill\", \"black\")\n      .attr(\"font-family\", \"'Pragati Narrow', sans-serif\")\n      .text(d => {\n        //this is some cutting edge stuff..\n        //i didn't want to spend too much time messing with text size to fit bubbles.\n        //will refactor this when i have more time.\n        if (d.name.length > 17 && this.state.rScale(d.value) / 3 > 17)\n          return d.name.substring(0, 17);\n        return d.name.substring(0, this.state.rScale(d.value) / 3);\n      });\n  }\n\n  //update positioning of group every tick.\n  forceTick = () => {\n    this.node.attr(\"transform\", d => `translate(${d.x}, ${d.y})`);\n  };\n\n  render() {\n    return <svg ref=\"svgContainer\" width={width} height={height} />;\n  }\n}\n\nexport default BubbleChart;\n","import React from \"react\";\nimport BubbleChart from \"../../components/BubbleChart/BubbleChart\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport \"./TrackMetrics.css\";\n\nconst trackMetrics = props => {\n  let circleData = null;\n  let content = null;\n\n  if (props.isLoaded) {\n    content = <Spinner />;\n  }\n\n  if (props.trackMetrics) {\n    circleData = props.getTrackData();\n    content = (\n      <>\n        <BubbleChart className=\"BubbleChart\" data={circleData} />\n        <button onClick={props.handleBubbles}>Change Bubbles</button>\n      </>\n    );\n  }\n\n  return (\n    <div id=\"trackSpins\" className=\"TrackMetrics\">\n      <div className=\"TrackMetrics__label\">\n        <span>Track Spins</span>\n      </div>\n      <div className=\"TrackMetrics__metrics\">{content}</div>\n    </div>\n  );\n};\n\nexport default trackMetrics;\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport debounce from \"lodash/debounce\";\nimport NavigationBar from \"./components/NavigationBar/NavigationBar\";\nimport ArtistInfo from \"./containers/ArtistInfo/ArtistInfo\";\nimport SocialMediaMetrics from \"./containers/SocialMediaMetrics/SocialMediaMetrics\";\nimport TrackMetrics from \"./containers/TrackMetrics/TrackMetrics\";\nimport moment from \"moment\";\n\nclass App extends Component {\n  state = {\n    artist: \"\",\n    artistId: \"\",\n    artistInfo: null,\n    metrics: null,\n    metricMetadata: null,\n    metricId: 41,\n    trackMetricId: 411,\n    trackMetrics: null,\n    startDate: moment(new Date())\n      .subtract(5, \"y\")\n      .unix(),\n    endDate: moment(new Date()).unix(),\n    bubbleData: [],\n    isLoaded: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.emitDebouncedSearch = debounce(this.handleArtistSearch, 500);\n  }\n  //Search Artis Event Handlers\n  handleArtistChange = event => {\n    this.emitDebouncedSearch(event.target.value);\n  };\n  handleArtistSearch = val => {\n    this.setState({ artist: val });\n  };\n\n  componentDidMount() {\n    this.grabMetricMetadata();\n    if (this.state.artist) {\n      this.grabArtistMetric();\n      //this.grabArtistInfo();\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    //Only update artist data if new entry is not blank or different from prev entry\n    if (this.state.artist) {\n      if (this.state.artist !== prevState.artist) {\n        this.grabArtistMetric();\n        //this.grabArtistInfo();\n      }\n    }\n  }\n\n  resetArtistInfo() {\n    this.setState({ trackMetrics: null, metrics: null, artistInfo: null });\n  }\n\n  //Grabs the metric meta data.\n  grabMetricMetadata() {\n    axios\n      .get(\"metrics/?fields=items.*\")\n      .then(response => {\n        this.setState({ metricMetadata: response.data });\n      })\n      .catch(error => console.log(error, \"grabMetricMetadata\"));\n  }\n\n  //method to grab artist metrics.\n  grabArtistMetric() {\n    //Grab 5 years of data\n    const startDate = moment(new Date())\n      .subtract(5, \"y\")\n      .format(\"YYYY-MM-DD\");\n    const endDate = moment(new Date()).format(\"YYYY-MM-DD\");\n\n    //API searches for one artist.\n    axios\n      .get(`search/v1/artists/?query=${this.state.artist}&limit=1`)\n      .then(response => {\n        if (!response.data.artists.length) return null;\n\n        //When searching for new artist. Set is loaded to true. Add spinner bars for each section.\n        this.setState({ isLoaded: true });\n        this.resetArtistInfo();\n\n        //Set state for artist info.\n        const artistInfo = response.data.artists[0];\n        this.setState({ artistId: artistInfo.id });\n\n        //grab Track metrics\n        this.grabTrackMetrics();\n\n        //grab artist info\n        this.grabArtistInfo();\n\n        //set metrics to null when searching for new artist metrics;\n        this.setState({ metrics: null });\n        //Grabs Social Media Metrics\n        //id: 28, 41, 11, 151, 247\n        return axios.get(\n          `artists/${\n            artistInfo.id\n          }/data?metricIds=28,41,11,151,247&startDate=${startDate}&endDate=${endDate}&timeseries=totals,deltas`\n        );\n      })\n      .then(response => {\n        if (response) {\n          this.setState({\n            metrics: response.data,\n            metricId: response.data.data[0].metricId\n          });\n          //console.log(\"metrics\", response.data);\n        }\n      })\n      .catch(error => console.log(error, \"grabArtistMetric\"));\n  }\n\n  //Grabs Artist Info\n  grabArtistInfo() {\n    //set artist info to null when searching for new artist info.\n    this.setState({ artistInfo: null });\n\n    axios\n      .get(`artists/${this.state.artistId}/`)\n      .then(response => {\n        if (response) {\n          //console.log(\"artistinfo\", response.data);\n          this.setState({ artistInfo: response.data });\n        }\n      })\n      .catch(error => console.log(error, \"grabArtistInfo\"));\n  }\n\n  //Grab Artist Track Metrics\n  grabTrackMetrics() {\n    //set track Metrics to null when searching new metrics.\n    this.setState({ trackMetrics: null });\n\n    axios\n      .get(`metrics/v1/entity/${this.state.artistId}/nestedAssets?metric=410`)\n      .then(response => {\n        console.log(\"track metric\", response.data);\n        //if theres no track metrics. API returns empty array. set trackMetrics state null\n        if (!response.data.data) {\n          this.setState({ trackMetrics: null });\n        } else {\n          this.setState({ trackMetrics: response.data });\n        }\n      })\n      .catch(error => console.log(error, \"grabTrackMetrics\"));\n  }\n\n  //Filters through an array of metric arrays and returns matching metric ID to pass to barChart component.\n  getChartData = id => {\n    const dataArr = this.state.metrics.data.filter(item => {\n      return item.metricId === id;\n    });\n\n    //if data exists for metric id. grab deltas or totals\n    //refactor this code to create data with both deltas and totals. -AWOO\n    if (dataArr.length) {\n      let data;\n      if (id === 41 || id === 247) {\n        data = dataArr[0].timeseries.deltas;\n      } else {\n        data = dataArr[0].timeseries.totals;\n      }\n      const chartData = Object.keys(data).map(keys => {\n        return { date: new Date(keys), value: data[keys] };\n      });\n\n      return chartData;\n    }\n  };\n\n  //get clean track data.\n  getTrackData = () => {\n    //redo this.\n    if (this.state.trackMetrics) {\n      return this.state.trackMetrics.data.filter(data => {\n        return data.summary.TW;\n      });\n    }\n  };\n\n  handleMetricIdChange = id => {\n    if (this.state.metricId !== id) {\n      this.setState({ metricId: id });\n    }\n  };\n\n  onRangeChange = e => {\n    //manage dates with moment js. convert to unix time format. set state for endDate-startDate\n    if (this.state.startDate !== e[0] || this.state.endDate !== e[1]) {\n      this.setState({ startDate: e[0], endDate: e[1] });\n    }\n  };\n\n  //TODO - Bubble Handler\n  handleBubbles = () => {\n    this.setState({ bubbleData: [] });\n  };\n\n  render() {\n    let {\n      artistInfo,\n      metrics,\n      metricId,\n      metricMetadata,\n      trackMetrics,\n      isLoaded,\n      startDate,\n      endDate\n    } = this.state;\n\n    return (\n      <>\n        <div className=\"App\">\n          <NavigationBar handleArtistChange={this.handleArtistChange} />\n\n          {isLoaded ? (\n            <>\n              <ArtistInfo artistInfo={artistInfo} isLoaded={isLoaded} />\n\n              <SocialMediaMetrics\n                isLoaded={isLoaded}\n                metrics={metrics}\n                onRangeChange={this.onRangeChange}\n                handleMetricIdChange={this.handleMetricIdChange}\n                metricMetadata={metricMetadata}\n                getChartData={this.getChartData}\n                metricId={metricId}\n                startDate={startDate}\n                endDate={endDate}\n              />\n\n              <TrackMetrics\n                isLoaded={isLoaded}\n                trackMetrics={trackMetrics}\n                getTrackData={this.getTrackData}\n                handleBubbles={this.handleBubbles}\n              />\n            </>\n          ) : null}\n        </div>\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport axios from \"axios\";\n\nconst publicKey = \"eb74a82009cbc53c9b44866743633f9d\";\n\naxios.defaults.baseURL = \"https://api.nextbigsound.com/\";\naxios.defaults.params = {};\naxios.defaults.params[\"access_token\"] = publicKey;\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}