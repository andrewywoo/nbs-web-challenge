(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(t,e,a){},121:function(t,e,a){},123:function(t,e,a){},191:function(t,e,a){},194:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(32),c=a.n(i),s=(a(88),a(9)),l=a(10),o=a(12),u=a(11),d=a(13),h=(a(90),a(5)),m=a.n(h),f=a(81),g=a.n(f),v=(a(119),function(t){var e;return t.metricNames&&(e=t.metricNames.map(function(e){return r.a.createElement("button",{key:e.id,onClick:t.clicked.bind(void 0,e.id)},e.fullName)})),r.a.createElement("div",{className:"metric-view-bar"},e)}),p=(a(121),function(t){return r.a.createElement("nav",{className:"NavigationBar"},r.a.createElement("div",{className:"NavigationBar__search-bar"},r.a.createElement("input",{id:"search",className:"artistSearchInput",type:"text",placeholder:"Search For An Artist",onChange:t.handleArtistChange})),r.a.createElement("div",{className:"NavigationBar__links"},r.a.createElement("ul",{className:"NavigationBar__ul"},r.a.createElement("li",{className:"NavigationBar__li"},r.a.createElement("a",{href:"#info",className:"NavigationBar__href"},"Artist Info")),r.a.createElement("li",{className:"NavigationBar__link"},r.a.createElement("a",{href:"#info",className:"NavigationBar__href"},"Social Media")),r.a.createElement("li",{className:"NavigationBar__link"},r.a.createElement("a",{href:"#info",className:"NavigationBar__href"},"Track Spins")))))}),y=(a(123),function(t){var e,a,n=null;return t.artistInfo&&(e=r.a.createElement("img",{height:"100",src:t.artistInfo.images[0][100],alt:"Artist"}),a=r.a.createElement("h1",null,"Artist Name: ",t.artistInfo.name),n=r.a.createElement("h2",null,"Genre: ",t.artistInfo.genres.join(" "))),r.a.createElement("div",{className:"artist-info"},e,r.a.createElement("div",{style:{textAlign:"center"}},a,n))}),b=a(1),k=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={x:null,y:null,width:null,height:null,fill:null},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidUpdate",value:function(){var t=this.state,e=t.y,a=t.height;(this.props.yExtent?b.p(this.refs.rect).attr("y",this.props.yScale(this.props.yExtent[0])):b.p(this.refs.rect).attr("y",this.props.yScale(0))).attr("height",0).transition().duration(800).attr("y",e).attr("height",a)}},{key:"render",value:function(){var t=this.state,e=t.x,a=t.y,n=t.height,i=t.width,c=t.fill;return r.a.createElement("rect",{ref:"rect",x:e,y:a,height:n,width:i,fill:c})}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t?{x:t.x,y:t.y,width:t.width,height:t.height,fill:t.fill}:null}}]),e}(n.Component),S=60,E=20,x=20,M=50,A=500-E-M,N=700-S-x,I=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={bars:[],xScale:b.n().range([0,N]),yScale:b.k().range([A,0]),wScale:b.j().range([0,N]).paddingInner(.1).paddingOuter(0),accentScale:b.m(b.h),yExtent:null},a.xAxis=b.a(a.state.xScale).tickFormat(b.q("%b-%Y")),a.yAxis=b.b(a.state.yScale),a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"shouldComponentUpdate",value:function(t,e){return!0}},{key:"componentDidMount",value:function(){b.p(this.refs.xAxis).transition().duration(800).call(this.xAxis),b.p(this.refs.yAxis).transition().duration(800).call(this.yAxis)}},{key:"componentDidUpdate",value:function(){console.log("componentDidUpdate"),b.p(this.refs.xAxis).transition().duration(800).call(this.xAxis),b.p(this.refs.yAxis).transition().duration(800).call(this.yAxis)}},{key:"render",value:function(){var t=this;return r.a.createElement("svg",{height:A+E+M,width:N+S+x},r.a.createElement("g",{transform:"translate(".concat(S,",").concat(E,")")},this.state.bars.map(function(e,a){return r.a.createElement(k,{key:a,x:e.x,y:e.y,height:e.height,width:t.state.wScale.bandwidth(),fill:e.fill,yScale:t.state.yScale})}),r.a.createElement("g",{ref:"xAxis",transform:"translate(0, ".concat(A,")")}),r.a.createElement("g",{ref:"yAxis"})))}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(!t)return null;var a=t.data,n=e.xScale,r=e.yScale,i=e.wScale,c=e.accentScale;return n.domain(b.c(a,function(t){return t.date})),r.domain([0,b.i(a,function(t){return t.value})]),i.domain(a.map(function(t){return t.date})),c.domain([b.i(a,function(t){return t.value}),0]),{bars:a.map(function(t){return{x:n(t.date),y:r(t.value),height:A-r(t.value),fill:c(t.value)}}),yScale:r}}}]),e}(n.Component),D=a(82),w=a.n(D),C=(a(189),a(191),function(t){var e=null;return t.data&&(e=r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{data:t.data}),r.a.createElement(w.a,{className:"range-slider",defaultValue:[0,10],min:0,max:10,allowCross:!1,onChange:t.onRangeChange}))),e}),j=600-20-20,O=700-20-20,_=b.g().force("center",b.d(O/2,j/2)).force("charge",b.f().strength(180)),T=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={circles:[],rScale:b.k().range([30,130]),cScale:b.l(b.o)},a.forceTick=function(){a.node.attr("transform",function(t){return"translate(".concat(t.x,", ").concat(t.y,")")})},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;_.force("collision",b.e().radius(function(e){return t.state.rScale(e.value)})).on("tick",this.forceTick),this.renderCircles(),_.nodes(this.state.circles).alpha(.9).restart()}},{key:"componentDidUpdate",value:function(){var t=this;_.force("collision",b.e().radius(function(e){return t.state.rScale(e.value)})).on("tick",this.forceTick),this.renderCircles(),_.nodes(this.state.circles).alpha(.9).restart()}},{key:"renderCircles",value:function(){var t=this;this.node=b.p(this.refs.svgContainer).selectAll("g").data(this.state.circles),this.node.exit().remove(),this.nodeEnter=this.node.enter().append("g"),this.circles=this.nodeEnter.append("circle"),this.label=this.nodeEnter.append("text"),this.node=this.nodeEnter.merge(this.node),this.node.select("circle").attr("r",function(e){return t.state.rScale(e.value)}).attr("fill",function(e){return t.state.cScale(e.name)}),this.node.select("text").attr("text-anchor","middle").attr("font-size",function(e){return t.state.rScale(e.value)/4}).attr("fill","black").text(function(e){return e.name.length>17&&t.state.rScale(e.value)/3>17?e.name.substring(0,17):e.name.substring(0,t.state.rScale(e.value)/3)})}},{key:"render",value:function(){return r.a.createElement("svg",{ref:"svgContainer",width:O,height:j})}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(!t)return null;var a=t.data,n=e.rScale,r=e.cScale,i=a.sort(function(t,e){return e.summary.TW-t.summary.TW}).slice(0,15);return n.domain(b.c(i,function(t){return t.summary.TW})),r.domain(i,function(t){return t.metadata.asset_name}),{circles:i.map(function(t){return{name:t.metadata.asset_name,value:t.summary.TW}})}}}]),e}(n.Component),B=a(53),Y=a.n(B),F=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(o.a)(this,Object(u.a)(e).call(this))).state={artist:"",artistId:"",artistInfo:null,metrics:null,metricMetadata:null,metricId:41,trackMetricId:411,trackMetrics:null,startDate:Y()("2018-01-01").format("YYYY-MM-DD"),endDate:Y()("2018-12-31").format("YYYY-MM-DD"),bubbleData:[]},t.handleArtistChange=function(e){t.emitDebouncedSearch(e.target.value)},t.handleArtistSearch=function(e){t.setState({artist:e})},t.getChartData=function(e){var a,n=t.state.metrics.data.filter(function(t){return t.metricId===e});if(n.length)return a=41===e||247===e?n[0].timeseries.deltas:n[0].timeseries.totals,Object.keys(a).map(function(t){return{date:new Date(t),value:a[t]}})},t.getTrackData=function(){if(console.log(t.state.trackMetrics,t.state.trackMetrics.length),t.state.trackMetrics&&t.state.trackMetrics.data.length)return t.state.trackMetrics.data.filter(function(t){return t.summary.TW})},t.handleMetricIdChange=function(e){t.state.metricId!==e&&t.setState({metricId:e})},t.onRangeChange=function(t){console.log(t)},t.handleBubbles=function(){t.setState({bubbleData:[{name:"New Rules",radius:50*Math.random()+20},{name:"Hotter Than Hell",radius:50*Math.random()+20},{name:"Mwah",radius:50*Math.random()+20},{name:"Test",radius:50*Math.random()+20},{name:"Andrew",radius:50*Math.random()+20},{name:"Kaye",radius:50*Math.random()+20}]})},t.emitDebouncedSearch=g()(t.handleArtistSearch,500),t}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.grabMetricMetadata(),this.state.artist&&this.grabArtistMetric()}},{key:"componentDidUpdate",value:function(t,e){this.state.artist&&this.state.artist!==e.artist&&this.grabArtistMetric()}},{key:"grabMetricMetadata",value:function(){var t=this;m.a.get("metrics/?fields=items.*").then(function(e){t.setState({metricMetadata:e.data})}).catch(function(t){return console.log(t,"grabMetricMetadata")})}},{key:"grabArtistMetric",value:function(){var t=this;m.a.get("search/v1/artists/?query=".concat(this.state.artist,"&limit=1")).then(function(e){if(!e.data.artists.length)return null;var a=e.data.artists[0];return t.setState({artistId:a.id}),t.grabTrackMetrics(),t.grabArtistInfo(),m.a.get("artists/".concat(a.id,"/data?metricIds=28,41,11,151,247&startDate=").concat(t.state.startDate,"&endDate=").concat(t.state.endDate,"&timeseries=totals,deltas"))}).then(function(e){e&&t.setState({metrics:e.data,metricId:e.data.data[0].metricId})}).catch(function(t){return console.log(t,"grabArtistMetric")})}},{key:"grabArtistInfo",value:function(){var t=this;m.a.get("artists/".concat(this.state.artistId,"/")).then(function(e){e&&t.setState({artistInfo:e.data})}).catch(function(t){return console.log(t,"grabArtistInfo")})}},{key:"grabTrackMetrics",value:function(){var t=this;m.a.get("metrics/v1/entity/".concat(this.state.artistId,"/nestedAssets?metric=410")).then(function(e){console.log("track metric",e.data),t.setState({trackMetrics:e.data})}).catch(function(t){return console.log(t,"grabTrackMetrics")})}},{key:"render",value:function(){var t,e,a,n,i=this.state,c=i.artistInfo,s=i.metrics,l=i.metricId,o=i.metricMetadata,u=i.trackMetrics;return s&&(e=this.getChartData(l),t=s.data.reduce(function(t,e){var a=!0,n=!1,r=void 0;try{for(var i,c=o.items[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var s=i.value;if(s.id===e.metricId){t.push({fullName:s.fullName,id:s.id});break}}}catch(l){n=!0,r=l}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return t},[]).sort(function(t,e){return t.id-e.id})),u&&(n=this.getTrackData(),console.log("circ",n),a=r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{data:n}),r.a.createElement("button",{onClick:this.handleBubbles},"Change Bubbles"))),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(p,{handleArtistChange:this.handleArtistChange}),r.a.createElement(y,{artistInfo:c}),a,r.a.createElement(C,{data:e,onRangeChang:this.onRangeChange}),r.a.createElement(v,{clicked:this.handleMetricIdChange,metricNames:t})))}}]),e}(n.Component);m.a.defaults.baseURL="https://api.nextbigsound.com/",m.a.defaults.params={},m.a.defaults.params.access_token="eb74a82009cbc53c9b44866743633f9d",c.a.render(r.a.createElement(F,null),document.getElementById("root"))},83:function(t,e,a){t.exports=a(194)},88:function(t,e,a){},90:function(t,e,a){}},[[83,2,1]]]);
//# sourceMappingURL=main.3363b7b8.chunk.js.map