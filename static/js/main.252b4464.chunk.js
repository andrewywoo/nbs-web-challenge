(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(t,e,a){},124:function(t,e,a){},126:function(t,e,a){},129:function(t,e,a){},131:function(t,e,a){},190:function(t,e,a){},192:function(t,e,a){},194:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),i=a(7),c=a.n(i),s=(a(91),a(20)),l=a(21),o=a(23),u=a(22),d=a(24),m=(a(93),a(16)),h=a.n(m),f=a(82),g=a.n(f),v=(a(122),function(t){return r.a.createElement("nav",{className:"NavigationBar"},r.a.createElement("div",{className:"NavigationBar__search-bar"},r.a.createElement("input",{id:"search",className:"artistSearchInput",type:"text",placeholder:"Search For An Artist",onChange:t.handleArtistChange})),r.a.createElement("div",{className:"NavigationBar__links"},r.a.createElement("ul",{className:"NavigationBar__ul"},r.a.createElement("li",{className:"NavigationBar__li"},r.a.createElement("a",{href:"#artistInfo",className:"NavigationBar__href"},"Artist Info")),r.a.createElement("li",{className:"NavigationBar__li"},r.a.createElement("a",{href:"#socialMedia",className:"NavigationBar__href"},"Social Media")),r.a.createElement("li",{className:"NavigationBar__li"},r.a.createElement("a",{href:"#trackSpins",className:"NavigationBar__href"},"Track Spins")))))}),y=(a(124),function(){return r.a.createElement("div",{className:"Loader"},"Loading...")}),b=(a(126),function(t){var e=null,a=null,n=null,i=null;return t.isLoaded&&(i=r.a.createElement(y,null)),t.artistInfo&&(e=r.a.createElement("img",{height:"100",src:t.artistInfo.images[0][100],alt:"Artist"}),a=r.a.createElement("h1",null,"Artist Name: ",t.artistInfo.name),n=r.a.createElement("h2",null,"Genre: ",t.artistInfo.genres.join(" ")),i=r.a.createElement(r.a.Fragment,null,e,r.a.createElement("div",{style:{textAlign:"center"}},a,n))),r.a.createElement("div",{id:"artistInfo",className:"ArtistInfo"},r.a.createElement("div",{className:"ArtistInfo__label"},r.a.createElement("span",null,"Artist Info")),r.a.createElement("div",{className:"ArtistInfo__info"},i))}),p=a(6),k=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={x:null,y:null,width:null,height:null,fill:null},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.animateRect()}},{key:"componentDidUpdate",value:function(){this.animateRect()}},{key:"animateRect",value:function(){var t=this.state,e=t.y,a=t.height;(this.props.yExtent?p.q(this.refs.rect).attr("y",this.props.yScale(this.props.yExtent[0])):p.q(this.refs.rect).attr("y",this.props.yScale(0))).attr("height",0).transition().duration(800).attr("y",e).attr("height",a)}},{key:"render",value:function(){var t=this.state,e=t.x,a=t.y,n=t.height,i=t.width,c=t.fill;return r.a.createElement("rect",{ref:"rect",x:e,y:a,height:n,width:i,fill:c})}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t?{x:t.x,y:t.y,width:t.width,height:t.height,fill:t.fill}:null}}]),e}(n.Component),M=a(10),E=a.n(M),S=(a(129),100),D=20,x=20,N=50,I=480-D-N,A=800-S-x,_=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={bars:[],xScale:p.o().range([0,A]),yScale:p.l().range([I,0]),wScale:p.k().range([0,A]).paddingInner(.1).paddingOuter(0),accentScale:p.n(p.i),yExtent:null},a.xAxis=p.a(a.state.xScale).tickFormat(p.r("%b-%Y")),a.yAxis=p.b(a.state.yScale),a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"shouldComponentUpdate",value:function(t,e){return!0}},{key:"componentDidMount",value:function(){this.drawAxis()}},{key:"componentDidUpdate",value:function(){this.drawAxis()}},{key:"drawAxis",value:function(){p.q(this.refs.xAxis).transition().duration(800).call(this.xAxis).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)"),p.q(this.refs.yAxis).transition().duration(800).call(this.yAxis)}},{key:"render",value:function(){var t=this;return r.a.createElement("svg",{height:I+D+N,width:A+S+x},r.a.createElement("g",{transform:"translate(".concat(S,",").concat(D,")")},this.state.bars.map(function(e,a){return r.a.createElement(k,{key:a,x:e.x,y:e.y,height:e.height,width:t.state.wScale.bandwidth(),fill:e.fill,yScale:t.state.yScale})}),r.a.createElement("g",{ref:"xAxis",transform:"translate(0, ".concat(I,")")}),r.a.createElement("g",{ref:"yAxis"}),r.a.createElement("text",{className:"BarChart-yLabel",x:-I/2,y:-80,transform:"rotate(-90)",textAnchor:"middle"},this.props.yLabel)))}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(!t)return null;var a=t.chartData,n=t.startDate,r=t.endDate,i=e.xScale,c=e.yScale,s=e.wScale,l=e.accentScale,o=a.filter(function(t){var e=E.a.unix(n),a=E.a.unix(r),i=E()(t.date);return t.value&&t.date&&i>=e&&i<=a}).map(function(t){return t.value=+t.value,t});return i.domain(p.c(o,function(t){return t.date})),c.domain([0,p.j(o,function(t){return t.value})]),s.domain(o.map(function(t){return t.date})),l.domain([p.j(o,function(t){return t.value}),0]),{bars:o.map(function(t){return{x:i(t.date),y:c(t.value),height:I-c(t.value),fill:l(t.value)}}),yScale:c}}}]),e}(n.Component),w=(a(131),function(t){var e;return t.metricNames&&(e=t.metricNames.map(function(e){return r.a.createElement("button",{key:e.id,className:"MetricView__buttons",onClick:t.clicked.bind(void 0,e.id)},e.fullName)})),r.a.createElement("div",{className:"MetricViews"},e)}),C=a(59),j=(a(188),a(190),(0,C.a.createSliderWithTooltip)(C.a.Range)),T=E()(new Date).subtract(5,"y").unix(),O=E()(new Date).unix(),Y=function(t){var e=null,a=null,n=null,i=null,c=null;if(t.isLoaded&&(n=r.a.createElement(y,null)),t.metrics){e=t.getChartData(t.metricId);var s=(i=(a=t.metrics.data.reduce(function(e,a){var n=!0,r=!1,i=void 0;try{for(var c,s=t.metricMetadata.items[Symbol.iterator]();!(n=(c=s.next()).done);n=!0){var l=c.value;if(l.id===a.metricId){e.push({fullName:l.fullName,id:l.id});break}}}catch(o){r=!0,i=o}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e},[]).sort(function(t,e){return t.id-e.id})).filter(function(e){return e.id===t.metricId})[0].fullName).split(" ");c=s[s.length-1],n=r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{clicked:t.handleMetricIdChange,metricNames:a,chartTitle:i}),r.a.createElement("h1",{style:{marginBottom:".3em"}},i),r.a.createElement(_,{chartData:e,yLabel:c,startDate:t.startDate,endDate:t.endDate}),r.a.createElement("span",{className:"SocialMediaMetrics__metrics-date-range"},E.a.unix(t.startDate).format("MMM Do YYYY"),"   -   ",E.a.unix(t.endDate).format("MMM Do YYYY")),r.a.createElement(j,{className:"SocialMediaMetrics__metrics-range-slider",defaultValue:[t.startDate,t.endDate],min:T,max:O,step:86400,allowCross:!1,tipFormatter:function(t){return E.a.unix(t).format("MMM Do YYYY")},onAfterChange:t.onRangeChange}))}return r.a.createElement("div",{id:"socialMedia",className:"SocialMediaMetrics"},r.a.createElement("div",{className:"SocialMediaMetrics__label"},r.a.createElement("span",null,"Social Media")),r.a.createElement("div",{className:"SocialMediaMetrics__metrics"},n))},B=600-20-20,L=800-20-20,F=p.g().force("center",p.d(L/2,B/2)).force("charge",p.f().strength(150)),R=function(t){function e(){var t,a;Object(s.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={circles:[],rScale:p.l().range([30,125]),cScale:p.m(p.p)},a.forceTick=function(){a.node.attr("transform",function(t){return"translate(".concat(t.x,", ").concat(t.y,")")})},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;F.force("collision",p.e().radius(function(e){return t.state.rScale(e.value)})).on("tick",this.forceTick),this.renderCircles(),F.nodes(this.state.circles).alpha(.9).restart()}},{key:"componentDidUpdate",value:function(){var t=this;F.force("collision",p.e().radius(function(e){return t.state.rScale(e.value)})).on("tick",this.forceTick),this.renderCircles(),F.nodes(this.state.circles).alpha(.9).restart()}},{key:"renderCircles",value:function(){var t=this;this.node=p.q(this.refs.svgContainer).selectAll("g").data(this.state.circles),this.node.exit().remove(),this.nodeEnter=this.node.enter().append("g"),this.circles=this.nodeEnter.append("circle"),this.label=this.nodeEnter.append("text"),this.val=this.nodeEnter.append("text"),this.node=this.nodeEnter.merge(this.node),this.node.select("circle").attr("y",1).attr("r",function(e){return t.state.rScale(e.value)}).attr("fill",function(e){return t.state.cScale(e.name)}),this.label.attr("text-anchor","middle").attr("font-size",function(e){return t.state.rScale(e.value)/4}).attr("fill","black").attr("font-family","'Pragati Narrow', sans-serif").text(function(e){return e.name.length>17&&t.state.rScale(e.value)/3>17?e.name.substring(0,17):e.name.substring(0,t.state.rScale(e.value)/3)}),this.val.attr("text-anchor","middle").attr("font-size",function(e){return t.state.rScale(e.value)/4}).attr("dy","1em").attr("fill","black").attr("font-family","'Pragati Narrow', sans-serif").text(function(t){return p.h(",")(t.value)})}},{key:"render",value:function(){return r.a.createElement("svg",{ref:"svgContainer",width:L,height:B})}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(!t)return null;var a=t.data,n=e.rScale,r=e.cScale,i=a.sort(function(t,e){return e.summary.TW-t.summary.TW}).slice(0,15);return n.domain(p.c(i,function(t){return t.summary.TW})),r.domain(i,function(t){return t.metadata.asset_name}),{circles:i.map(function(t){return{name:t.metadata.asset_name,value:t.summary.TW}})}}}]),e}(n.Component),q=(a(192),function(t){var e=null,a=null,n=null;return t.isLoaded&&(a=r.a.createElement(y,null)),t.trackMetrics&&(e=t.getTrackData(),n=t.metricMetadata.items.filter(function(e){return e.id===t.trackMetricId})[0].fullName,a=r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:t.handleBubbles},"Change Bubbles"),r.a.createElement("h1",{className:"TrackMetrics__metrics-title"},n),r.a.createElement(R,{className:"BubbleChart",data:e}))),r.a.createElement("div",{id:"trackSpins",className:"TrackMetrics"},r.a.createElement("div",{className:"TrackMetrics__label"},r.a.createElement("span",null,"Track Spins")),r.a.createElement("div",{className:"TrackMetrics__metrics"},a))}),U=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(o.a)(this,Object(u.a)(e).call(this,t))).state={artist:"",artistId:"",artistInfo:null,metrics:null,metricMetadata:null,metricId:41,trackMetricId:411,trackMetrics:null,startDate:E()(new Date).subtract(5,"y").unix(),endDate:E()(new Date).unix(),bubbleData:[],isLoaded:!1},a.handleArtistChange=function(t){a.emitDebouncedSearch(t.target.value)},a.handleArtistSearch=function(t){a.setState({artist:t})},a.getChartData=function(t){var e,n=a.state.metrics.data.filter(function(e){return e.metricId===t});if(n.length)return e=41===t||247===t?n[0].timeseries.deltas:n[0].timeseries.totals,Object.keys(e).map(function(t){return{date:new Date(t),value:e[t]}})},a.getTrackData=function(){if(a.state.trackMetrics)return a.state.trackMetrics.data.filter(function(t){return t.summary.TW})},a.handleMetricIdChange=function(t){a.state.metricId!==t&&a.setState({metricId:t})},a.onRangeChange=function(t){a.state.startDate===t[0]&&a.state.endDate===t[1]||a.setState({startDate:t[0],endDate:t[1]})},a.handleBubbles=function(){a.setState({bubbleData:[]})},a.emitDebouncedSearch=g()(a.handleArtistSearch,500),a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.grabMetricMetadata(),this.state.artist&&this.grabArtistMetric()}},{key:"componentDidUpdate",value:function(t,e){this.state.artist&&this.state.artist!==e.artist&&this.grabArtistMetric()}},{key:"resetArtistInfo",value:function(){this.setState({trackMetrics:null,metrics:null,artistInfo:null})}},{key:"grabMetricMetadata",value:function(){var t=this;h.a.get("metrics/?fields=items.*").then(function(e){t.setState({metricMetadata:e.data})}).catch(function(t){return console.log(t,"grabMetricMetadata")})}},{key:"grabArtistMetric",value:function(){var t=this,e=E()(new Date).subtract(5,"y").format("YYYY-MM-DD"),a=E()(new Date).format("YYYY-MM-DD");h.a.get("search/v1/artists/?query=".concat(this.state.artist,"&limit=1")).then(function(n){if(!n.data.artists.length)return null;t.setState({isLoaded:!0}),t.resetArtistInfo();var r=n.data.artists[0];return t.setState({artistId:r.id}),t.grabTrackMetrics(),t.grabArtistInfo(),t.setState({metrics:null}),h.a.get("artists/".concat(r.id,"/data?metricIds=28,41,11,151,247&startDate=").concat(e,"&endDate=").concat(a,"&timeseries=totals,deltas"))}).then(function(e){e&&t.setState({metrics:e.data,metricId:e.data.data[0].metricId})}).catch(function(t){return console.log(t,"grabArtistMetric")})}},{key:"grabArtistInfo",value:function(){var t=this;this.setState({artistInfo:null}),h.a.get("artists/".concat(this.state.artistId,"/")).then(function(e){e&&t.setState({artistInfo:e.data})}).catch(function(t){return console.log(t,"grabArtistInfo")})}},{key:"grabTrackMetrics",value:function(){var t=this;this.setState({trackMetrics:null}),h.a.get("metrics/v1/entity/".concat(this.state.artistId,"/nestedAssets?metric=410")).then(function(e){console.log("track metric",e.data),e.data.data?t.setState({trackMetrics:e.data}):t.setState({trackMetrics:null})}).catch(function(t){return console.log(t,"grabTrackMetrics")})}},{key:"render",value:function(){var t=this.state,e=t.artistInfo,a=t.metrics,n=t.metricId,i=t.metricMetadata,c=t.trackMetricId,s=t.trackMetrics,l=t.isLoaded,o=t.startDate,u=t.endDate;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(v,{handleArtistChange:this.handleArtistChange}),l?r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{artistInfo:e,isLoaded:l}),r.a.createElement(Y,{isLoaded:l,metrics:a,onRangeChange:this.onRangeChange,handleMetricIdChange:this.handleMetricIdChange,metricMetadata:i,getChartData:this.getChartData,metricId:n,startDate:o,endDate:u}),r.a.createElement(q,{isLoaded:l,metricMetadata:i,trackMetricId:c,trackMetrics:s,getTrackData:this.getTrackData,handleBubbles:this.handleBubbles})):null))}}]),e}(n.Component);h.a.defaults.baseURL="https://api.nextbigsound.com/",h.a.defaults.params={},h.a.defaults.params.access_token="eb74a82009cbc53c9b44866743633f9d",c.a.render(r.a.createElement(U,null),document.getElementById("root"))},86:function(t,e,a){t.exports=a(194)},91:function(t,e,a){},93:function(t,e,a){}},[[86,2,1]]]);
//# sourceMappingURL=main.252b4464.chunk.js.map